{"version":3,"names":["cov_r0de117h9","actualCoverage","s","ShipBobService","constructor","config","f","name","apiKey","apiUrl","fetchApi","endpoint","options","b","response","fetch","headers","ok","Error","statusText","json","createShipment","request","method","body","JSON","stringify","reference_id","orderId","to_address","shippingAddress","address1","street","city","state","country","zip","postalCode","phone","items","map","item","productId","sku","quantity","trackingId","tracking_number","getShipmentStatus","status","mapShipmentStatus","estimatedDeliveryDate","Date","estimated_delivery_date","location","current_location","events","tracking_events","event","date","timestamp","getInventory","id","product_name","on_hand_quantity","warehouse_location","updateInventory","toLowerCase"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/lib/services/warehouse/shipbob.ts"],"sourcesContent":["import { WarehouseProvider, CreateShipmentRequest, ShipmentResponse, ShipmentStatus, WarehouseProduct } from './types';\n\nexport class ShipBobService implements WarehouseProvider {\n  private apiKey: string;\n  private apiUrl: string;\n\n  constructor(config: { apiKey: string; apiUrl: string }) {\n    this.apiKey = config.apiKey;\n    this.apiUrl = config.apiUrl;\n  }\n\n  name = 'ShipBob';\n\n  private async fetchApi(endpoint: string, options: RequestInit = {}) {\n    const response = await fetch(`${this.apiUrl}${endpoint}`, {\n      ...options,\n      headers: {\n        'Authorization': `Bearer ${this.apiKey}`,\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`ShipBob API error: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async createShipment(request: CreateShipmentRequest): Promise<ShipmentResponse> {\n    const response = await this.fetchApi('/shipments', {\n      method: 'POST',\n      body: JSON.stringify({\n        reference_id: request.orderId,\n        to_address: {\n          name: request.shippingAddress.name,\n          address1: request.shippingAddress.street,\n          city: request.shippingAddress.city,\n          state: request.shippingAddress.state,\n          country: request.shippingAddress.country,\n          zip: request.shippingAddress.postalCode,\n          phone: request.shippingAddress.phone,\n        },\n        items: request.items.map(item => ({\n          reference_id: item.productId,\n          sku: item.sku,\n          quantity: item.quantity,\n        })),\n      }),\n    });\n\n    return { trackingId: response.tracking_number };\n  }\n\n  async getShipmentStatus(trackingId: string): Promise<ShipmentStatus> {\n    const response = await this.fetchApi(`/shipments/${trackingId}/tracking`);\n\n    return {\n      trackingId,\n      status: this.mapShipmentStatus(response.status),\n      estimatedDeliveryDate: new Date(response.estimated_delivery_date),\n      location: response.current_location,\n      events: response.tracking_events.map((event: any) => ({\n        date: new Date(event.timestamp),\n        status: event.status,\n        location: event.location,\n      })),\n    };\n  }\n\n  async getInventory(productId: string): Promise<WarehouseProduct> {\n    const response = await this.fetchApi(`/inventory/${productId}`);\n\n    return {\n      id: productId,\n      sku: response.sku,\n      name: response.product_name,\n      quantity: response.on_hand_quantity,\n      location: response.warehouse_location,\n    };\n  }\n\n  async updateInventory(productId: string, quantity: number): Promise<void> {\n    await this.fetchApi(`/inventory/${productId}`, {\n      method: 'PUT',\n      body: JSON.stringify({\n        quantity,\n      }),\n    });\n  }\n\n  private mapShipmentStatus(status: string): ShipmentStatus['status'] {\n    switch (status.toLowerCase()) {\n      case 'in_transit':\n        return 'shipped';\n      case 'delivered':\n        return 'delivered';\n      case 'processing':\n        return 'processing';\n      default:\n        return 'pending';\n    }\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IASE;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;+BAPW;;;;;;WAAAC,cAAA;;;AAAN,MAAMA,cAAA;EAIXC,YAAYC,MAA0C,EAAE;IAAA;IAAAL,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAE,CAAA;SAKxDK,IAAA,GAAO;IAAA;IAAAP,aAAA,GAAAE,CAAA;IAJL,IAAI,CAACM,MAAM,GAAGH,MAAA,CAAOG,MAAM;IAAA;IAAAR,aAAA,GAAAE,CAAA;IAC3B,IAAI,CAACO,MAAM,GAAGJ,MAAA,CAAOI,MAAM;EAC7B;EAIA,MAAcC,SAASC,QAAgB,EAAEC,OAAA;EAAA;EAAA,CAAAZ,aAAA,GAAAa,CAAA,UAAuB,CAAC,CAAC,GAAE;IAAA;IAAAb,aAAA,GAAAM,CAAA;IAClE,MAAMQ,QAAA;IAAA;IAAA,CAAAd,aAAA,GAAAE,CAAA,OAAW,MAAMa,KAAA,CAAM,GAAG,IAAI,CAACN,MAAM,GAAGE,QAAA,EAAU,EAAE;MACxD,GAAGC,OAAO;MACVI,OAAA,EAAS;QACP,iBAAiB,UAAU,IAAI,CAACR,MAAM,EAAE;QACxC,gBAAgB;QAChB,GAAGI,OAAA,CAAQI;MACb;IACF;IAAA;IAAAhB,aAAA,GAAAE,CAAA;IAEA,IAAI,CAACY,QAAA,CAASG,EAAE,EAAE;MAAA;MAAAjB,aAAA,GAAAa,CAAA;MAAAb,aAAA,GAAAE,CAAA;MAChB,MAAM,IAAIgB,KAAA,CAAM,sBAAsBJ,QAAA,CAASK,UAAU,EAAE;IAC7D;IAAA;IAAA;MAAAnB,aAAA,GAAAa,CAAA;IAAA;IAAAb,aAAA,GAAAE,CAAA;IAEA,OAAOY,QAAA,CAASM,IAAI;EACtB;EAEA,MAAMC,eAAeC,OAA8B,EAA6B;IAAA;IAAAtB,aAAA,GAAAM,CAAA;IAC9E,MAAMQ,QAAA;IAAA;IAAA,CAAAd,aAAA,GAAAE,CAAA,QAAW,MAAM,IAAI,CAACQ,QAAQ,CAAC,cAAc;MACjDa,MAAA,EAAQ;MACRC,IAAA,EAAMC,IAAA,CAAKC,SAAS,CAAC;QACnBC,YAAA,EAAcL,OAAA,CAAQM,OAAO;QAC7BC,UAAA,EAAY;UACVtB,IAAA,EAAMe,OAAA,CAAQQ,eAAe,CAACvB,IAAI;UAClCwB,QAAA,EAAUT,OAAA,CAAQQ,eAAe,CAACE,MAAM;UACxCC,IAAA,EAAMX,OAAA,CAAQQ,eAAe,CAACG,IAAI;UAClCC,KAAA,EAAOZ,OAAA,CAAQQ,eAAe,CAACI,KAAK;UACpCC,OAAA,EAASb,OAAA,CAAQQ,eAAe,CAACK,OAAO;UACxCC,GAAA,EAAKd,OAAA,CAAQQ,eAAe,CAACO,UAAU;UACvCC,KAAA,EAAOhB,OAAA,CAAQQ,eAAe,CAACQ;QACjC;QACAC,KAAA,EAAOjB,OAAA,CAAQiB,KAAK,CAACC,GAAG,CAACC,IAAA,IAAS;UAAA;UAAAzC,aAAA,GAAAM,CAAA;UAAAN,aAAA,GAAAE,CAAA;UAAA;YAChCyB,YAAA,EAAcc,IAAA,CAAKC,SAAS;YAC5BC,GAAA,EAAKF,IAAA,CAAKE,GAAG;YACbC,QAAA,EAAUH,IAAA,CAAKG;UACjB;QAAA;MACF;IACF;IAAA;IAAA5C,aAAA,GAAAE,CAAA;IAEA,OAAO;MAAE2C,UAAA,EAAY/B,QAAA,CAASgC;IAAgB;EAChD;EAEA,MAAMC,kBAAkBF,UAAkB,EAA2B;IAAA;IAAA7C,aAAA,GAAAM,CAAA;IACnE,MAAMQ,QAAA;IAAA;IAAA,CAAAd,aAAA,GAAAE,CAAA,QAAW,MAAM,IAAI,CAACQ,QAAQ,CAAC,cAAcmC,UAAA,WAAqB;IAAA;IAAA7C,aAAA,GAAAE,CAAA;IAExE,OAAO;MACL2C,UAAA;MACAG,MAAA,EAAQ,IAAI,CAACC,iBAAiB,CAACnC,QAAA,CAASkC,MAAM;MAC9CE,qBAAA,EAAuB,IAAIC,IAAA,CAAKrC,QAAA,CAASsC,uBAAuB;MAChEC,QAAA,EAAUvC,QAAA,CAASwC,gBAAgB;MACnCC,MAAA,EAAQzC,QAAA,CAAS0C,eAAe,CAAChB,GAAG,CAAEiB,KAAA,IAAgB;QAAA;QAAAzD,aAAA,GAAAM,CAAA;QAAAN,aAAA,GAAAE,CAAA;QAAA;UACpDwD,IAAA,EAAM,IAAIP,IAAA,CAAKM,KAAA,CAAME,SAAS;UAC9BX,MAAA,EAAQS,KAAA,CAAMT,MAAM;UACpBK,QAAA,EAAUI,KAAA,CAAMJ;QAClB;MAAA;IACF;EACF;EAEA,MAAMO,aAAalB,SAAiB,EAA6B;IAAA;IAAA1C,aAAA,GAAAM,CAAA;IAC/D,MAAMQ,QAAA;IAAA;IAAA,CAAAd,aAAA,GAAAE,CAAA,QAAW,MAAM,IAAI,CAACQ,QAAQ,CAAC,cAAcgC,SAAA,EAAW;IAAA;IAAA1C,aAAA,GAAAE,CAAA;IAE9D,OAAO;MACL2D,EAAA,EAAInB,SAAA;MACJC,GAAA,EAAK7B,QAAA,CAAS6B,GAAG;MACjBpC,IAAA,EAAMO,QAAA,CAASgD,YAAY;MAC3BlB,QAAA,EAAU9B,QAAA,CAASiD,gBAAgB;MACnCV,QAAA,EAAUvC,QAAA,CAASkD;IACrB;EACF;EAEA,MAAMC,gBAAgBvB,SAAiB,EAAEE,QAAgB,EAAiB;IAAA;IAAA5C,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAE,CAAA;IACxE,MAAM,IAAI,CAACQ,QAAQ,CAAC,cAAcgC,SAAA,EAAW,EAAE;MAC7CnB,MAAA,EAAQ;MACRC,IAAA,EAAMC,IAAA,CAAKC,SAAS,CAAC;QACnBkB;MACF;IACF;EACF;EAEQK,kBAAkBD,MAAc,EAA4B;IAAA;IAAAhD,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAE,CAAA;IAClE,QAAQ8C,MAAA,CAAOkB,WAAW;MACxB,KAAK;QAAA;QAAAlE,aAAA,GAAAa,CAAA;QAAAb,aAAA,GAAAE,CAAA;QACH,OAAO;MACT,KAAK;QAAA;QAAAF,aAAA,GAAAa,CAAA;QAAAb,aAAA,GAAAE,CAAA;QACH,OAAO;MACT,KAAK;QAAA;QAAAF,aAAA,GAAAa,CAAA;QAAAb,aAAA,GAAAE,CAAA;QACH,OAAO;MACT;QAAA;QAAAF,aAAA,GAAAa,CAAA;QAAAb,aAAA,GAAAE,CAAA;QACE,OAAO;IACX;EACF;AACF","ignoreList":[]}