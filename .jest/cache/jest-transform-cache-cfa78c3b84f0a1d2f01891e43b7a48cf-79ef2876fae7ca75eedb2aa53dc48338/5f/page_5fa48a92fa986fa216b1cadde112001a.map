{"version":3,"names":["CredentialsSignInForm","signInDefaultValues","cov_kwoc9tmj3","s","email","process","env","NODE_ENV","b","password","allowedPaths","f","setting","site","_usesettingstore","default","searchParams","_navigation","useSearchParams","router","useRouter","isLoading","setIsLoading","_react1","useState","rawCallbackUrl","get","callbackUrl","some","path","startsWith","form","_reacthookform","useForm","resolver","_zod","zodResolver","_validator","UserSignInSchema","defaultValues","control","handleSubmit","onSubmit","data","result","_react","signIn","redirect","error","Error","fetch","method","cache","Promise","resolve","setTimeout","push","refresh","_usetoast","toast","title","description","message","variant","_jsxruntime","jsxs","className","jsx","_form","Form","type","name","value","FormField","render","field","FormItem","FormLabel","FormControl","_input","Input","placeholder","autoComplete","disabled","FormMessage","_button","Button","Fragment","_lucidereact","Loader2","_link","href"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/app/[locale]/(auth)/sign-in/page.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport Link from 'next/link';\nimport useSettingStore from '@/hooks/use-setting-store';\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { useForm } from 'react-hook-form';\nimport { IUserSignIn } from '@/types';\nimport { signIn } from 'next-auth/react';\nimport { toast } from '@/hooks/use-toast';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { UserSignInSchema } from '@/lib/validator';\nimport { useState } from 'react';\nimport { Loader2 } from 'lucide-react';\n\nconst signInDefaultValues = {\n  email: process.env.NODE_ENV === 'development' ? 'admin@example.com' : '',\n  password: process.env.NODE_ENV === 'development' ? '123456' : '',\n};\n\nconst allowedPaths = [\n  '/seller/registration',\n  '/cart',\n  '/checkout',\n  '/account',\n  '/',\n];\n\nexport default function CredentialsSignInForm() {\n  const {\n    setting: { site },\n  } = useSettingStore();\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const rawCallbackUrl = searchParams?.get('callbackUrl') || '/';\n  const callbackUrl = allowedPaths.some((path) =>\n    rawCallbackUrl.startsWith(path)\n  )\n    ? rawCallbackUrl\n    : '/';\n\n  const form = useForm<IUserSignIn>({\n    resolver: zodResolver(UserSignInSchema),\n    defaultValues: signInDefaultValues,\n  });\n\n  const { control, handleSubmit } = form;\n\n  const onSubmit = async (data: IUserSignIn) => {\n    try {\n      setIsLoading(true);\n\n      const result = await signIn('credentials', {\n        redirect: false,\n        email: data.email,\n        password: data.password,\n      });\n\n      if (result?.error) {\n        throw new Error(result.error);\n      }\n\n      // Force session refresh\n      await fetch('/api/auth/session', {\n        method: 'GET',\n        cache: 'no-store',\n      });\n\n      // Wait for session update\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n\n      router.push(callbackUrl);\n      router.refresh();\n    } catch (error) {\n      toast({\n        title: 'Error',\n        description:\n          error instanceof Error ? error.message : 'Invalid email or password',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-md mx-auto mt-10\">\n      <h1 className=\"text-2xl font-bold mb-4\">Sign In</h1>\n      <Form {...form}>\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n          <input type=\"hidden\" name=\"callbackUrl\" value={callbackUrl} />\n\n          <FormField\n            control={control}\n            name=\"email\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Email</FormLabel>\n                <FormControl>\n                  <Input\n                    placeholder=\"Enter email address\"\n                    type=\"email\"\n                    autoComplete=\"email\"\n                    disabled={isLoading}\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={control}\n            name=\"password\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Password</FormLabel>\n                <FormControl>\n                  <Input\n                    type=\"password\"\n                    placeholder=\"Enter password\"\n                    autoComplete=\"current-password\"\n                    disabled={isLoading}\n                    {...field}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <Button\n            type=\"submit\"\n            className=\"w-full\"\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Signing in...\n              </>\n            ) : (\n              'Sign In'\n            )}\n          </Button>\n\n          <div className=\"text-sm text-muted-foreground\">\n            By signing in, you agree to {site.name}&apos;s{' '}\n            <Link\n              href=\"/page/conditions-of-use\"\n              className=\"text-primary hover:underline\"\n            >\n              Conditions of Use\n            </Link>{' '}\n            and{' '}\n            <Link\n              href=\"/page/privacy-policy\"\n              className=\"text-primary hover:underline\"\n            >\n              Privacy Notice\n            </Link>\n            .\n          </div>\n        </form>\n      </Form>\n\n      <div className=\"mt-6\">\n        <h2 className=\"text-lg font-bold mb-4\">Quick Links</h2>\n        <ul className=\"space-y-2\">\n          <li>\n            <Link href=\"/seller/registration\">\n              <Button variant=\"outline\" className=\"w-full\">\n                Register as a Seller\n              </Button>\n            </Link>\n          </li>\n          <li>\n            <Link href=\"/admin/api-keys\">\n              <Button variant=\"outline\" className=\"w-full\">\n                API Key Management\n              </Button>\n            </Link>\n          </li>\n          <li>\n            <Link href=\"/admin/integrations\">\n              <Button variant=\"outline\" className=\"w-full\">\n                Integrations & API Dashboard\n              </Button>\n            </Link>\n          </li>\n          <li>\n            <Link href=\"/help\">\n              <Button variant=\"outline\" className=\"w-full\">\n                Help & Documentation\n              </Button>\n            </Link>\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]}