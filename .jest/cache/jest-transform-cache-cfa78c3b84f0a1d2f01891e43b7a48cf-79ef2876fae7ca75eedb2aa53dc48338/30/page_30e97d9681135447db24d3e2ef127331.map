{"version":3,"names":["SellerSubscriptionPage","params","cov_1eu9dhkn1d","f","t","s","_server","getTranslations","locale","session","_auth","auth","user","b","_navigation","redirect","sellerResult","_selleractions","getSellerByUserId","id","success","data","_jsxruntime","jsxs","className","jsx","seller","formSchema","_zod1","object","plan","enum","points","number","min","optional","paymentMethod","handleSubmit","formData","result","updateSubscription","_card","Card","CardHeader","CardTitle","_lucidereact","CreditCard","CardContent","subscription","pointsBalance","_form","Form","_reacthookform","useForm","resolver","_zod","zodResolver","defaultValues","undefined","action","FormField","name","render","field","FormItem","FormLabel","_select","Select","onValueChange","onChange","defaultValue","value","FormControl","SelectTrigger","SelectValue","placeholder","SelectContent","_constants","subscriptionPlans","map","SelectItem","price","FormMessage","_input","Input","type","e","parseInt","target","_button","Button"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/app/[locale]/(root)/seller/dashboard/subscription/page.tsx"],"sourcesContent":["import { getTranslations } from \"next-intl/server\";\nimport { auth } from \"@/auth\";\nimport { redirect } from \"next/navigation\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { getSellerByUserId, updateSubscription } from \"@/lib/actions/seller.actions\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useForm } from \"react-hook-form\";\nimport * as z from \"zod\";\nimport { CreditCard } from \"lucide-react\";\nimport { subscriptionPlans } from \"@/lib/constants\";\n\nexport default async function SellerSubscriptionPage({\n  params,\n}: {\n  params: Promise<{ locale: string }>;\n}) {\n  const t = await getTranslations(\"SellerDashboard\");\n  const { locale } = await params;\n  const session = await auth();\n\n  if (!session?.user) {\n    redirect(`/${locale}/sign-in`);\n  }\n\n  const sellerResult = await getSellerByUserId(session.user.id, locale);\n  if (!sellerResult.success || !sellerResult.data) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <h1 className=\"text-3xl font-bold mb-6\">{t(\"subscriptionSettings\")}</h1>\n        <p className=\"text-red-600\">{t(\"errors.sellerNotFound\")}</p>\n      </div>\n    );\n  }\n\n  const seller = sellerResult.data;\n\n  // Define form schema\n  const formSchema = z.object({\n    plan: z.enum([\"Trial\", \"Basic\", \"Pro\", \"VIP\"]),\n    points: z.number().min(0).optional(),\n    paymentMethod: z.enum([\"stripe\", \"paypal\", \"points\"]).optional(),\n  });\n\n  // Server Action to handle form submission\n  async function handleSubmit(formData: z.infer<typeof formSchema>) {\n    \"use server\";\n    const result = await updateSubscription(session.user.id, {\n      plan: formData.plan,\n      points: formData.points,\n      paymentMethod: formData.paymentMethod,\n    });\n    return result;\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"h-5 w-5\" />\n            {t(\"subscriptionSettings\")}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"mb-6\">\n            <h3 className=\"text-lg font-semibold\">{t(\"subscriptions.currentPlan\", { plan: seller.subscription.plan })}</h3>\n            <p className=\"text-gray-600\">{t(\"pointsBalance\")}: {seller.pointsBalance}</p>\n          </div>\n          <Form {...useForm({\n            resolver: zodResolver(formSchema),\n            defaultValues: {\n              plan: seller.subscription.plan,\n              points: 0,\n              paymentMethod: undefined,\n            },\n          })}>\n            <form action={handleSubmit} className=\"space-y-6\">\n              <FormField\n                name=\"plan\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t(\"subscriptions.selectPlan\")}</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder={t(\"subscriptions.selectPlan\")} />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {subscriptionPlans.map((plan) => (\n                          <SelectItem key={plan.id} value={plan.name}>\n                            {plan.name} (${plan.price}/month)\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                name=\"points\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t(\"subscriptions.redeemPoints.pointsLabel\")}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        {...field}\n                        onChange={(e) => field.onChange(parseInt(e.target.value))}\n                        placeholder=\"0\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                name=\"paymentMethod\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{t(\"subscriptions.selectMethod\")}</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder={t(\"subscriptions.selectMethod\")} />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"stripe\">Stripe</SelectItem>\n                        <SelectItem value=\"paypal\">PayPal</SelectItem>\n                        <SelectItem value=\"points\">Points</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <Button type=\"submit\">{t(\"subscriptions.submit\")}</Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}