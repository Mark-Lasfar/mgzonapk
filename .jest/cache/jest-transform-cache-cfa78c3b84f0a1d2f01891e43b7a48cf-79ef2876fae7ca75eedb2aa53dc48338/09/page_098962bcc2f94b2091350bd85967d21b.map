{"version":3,"names":["default","cov_21nydr53yj","f","s","PointsReportPage","metadata","title","_db","connectToDatabase","totalEarned","_pointstransactionmodel","aggregate","$match","type","$group","_id","total","$sum","totalRedeemed","recentTransactions","find","sort","createdAt","limit","_jsxruntime","jsxs","className","jsx","_card","Card","CardHeader","CardTitle","CardContent","b","length","map","tx","description","amount","userId","_utils","formatDateTime","dateTime"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/app/[locale]/admin/points-report/page.tsx"],"sourcesContent":["import { connectToDatabase } from '@/lib/db'\nimport PointsTransaction from '@/lib/db/models/points-transaction.model'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { formatDateTime } from '@/lib/utils'\nimport { Metadata } from 'next'\n\nexport const metadata: Metadata = {\n  title: 'Points Report',\n}\n\nexport default async function PointsReportPage() {\n  await connectToDatabase()\n  const totalEarned = await PointsTransaction.aggregate([\n    { $match: { type: 'earn' } },\n    { $group: { _id: null, total: { $sum: '$amount' } } },\n  ])\n  const totalRedeemed = await PointsTransaction.aggregate([\n    { $match: { type: 'redeem' } },\n    { $group: { _id: null, total: { $sum: '$amount' } } },\n  ])\n  const recentTransactions = await PointsTransaction.find()\n    .sort({ createdAt: -1 })\n    .limit(10)\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-4\">\n      <h1 className=\"h1-bold py-4\">Points Report</h1>\n      <div className=\"grid md:grid-cols-2 gap-4\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Total Points Earned</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p>{totalEarned[0]?.total || 0} points</p>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Total Points Redeemed</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p>{totalRedeemed[0]?.total || 0} points</p>\n          </CardContent>\n        </Card>\n      </div>\n      <Card className=\"mt-8\">\n        <CardHeader>\n          <CardTitle>Recent Transactions</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {recentTransactions.length > 0 ? (\n            <ul className=\"space-y-2\">\n              {recentTransactions.map((tx) => (\n                <li key={tx._id} className=\"border-b py-2\">\n                  <p>{tx.description}</p>\n                  <p>\n                    {tx.type === 'earn' ? '+' : '-'}{tx.amount} points by user {tx.userId} on{' '}\n                    {formatDateTime(tx.createdAt).dateTime}\n                  </p>\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p>No recent transactions.</p>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]}