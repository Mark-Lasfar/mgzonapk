{"version":3,"names":["cov_am5thflnw","actualCoverage","s","_default","process","env","MONGODB_URI","b","Error","uri","options","serverApi","version","_mongodb","ServerApiVersion","v1","strict","deprecationErrors","client","NODE_ENV","globalWithMongo","global","_mongoClient","MongoClient"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/lib/db/client.ts"],"sourcesContent":["// This approach is taken from https://github.com/vercel/next.js/tree/canary/examples/with-mongodb\nimport { MongoClient, ServerApiVersion } from 'mongodb'\n\nif (!process.env.MONGODB_URI) {\n  throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"')\n}\n\nconst uri = process.env.MONGODB_URI\nconst options = {\n  serverApi: {\n    version: ServerApiVersion.v1,\n    strict: true,\n    deprecationErrors: true,\n  },\n}\n\nlet client: MongoClient\n\nif (process.env.NODE_ENV === 'development') {\n  // In development mode, use a global variable so that the value\n  // is preserved across module reloads caused by HMR (Hot Module Replacement).\n  const globalWithMongo = global as typeof globalThis & {\n    _mongoClient?: MongoClient\n  }\n\n  if (!globalWithMongo._mongoClient) {\n    globalWithMongo._mongoClient = new MongoClient(uri, options)\n  }\n  client = globalWithMongo._mongoClient\n} else {\n  // In production mode, it's best to not use a global variable.\n  client = new MongoClient(uri, options)\n}\n\n// Export a module-scoped MongoClient. By doing this in a\n// separate module, the client can be shared across functions.\nexport default client\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIQ;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;;AA8BR;AACA;AACA;;;;;;WAAAC,QAAA;;;;;iCAnC8C;AAAA;AAAAH,aAAA,GAAAE,CAAA;AAE9C,IAAI,CAACE,OAAA,CAAQC,GAAG,CAACC,WAAW,EAAE;EAAA;EAAAN,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAE,CAAA;EAC5B,MAAM,IAAIM,KAAA,CAAM;AAClB;AAAA;AAAA;EAAAR,aAAA,GAAAO,CAAA;AAAA;AAEA,MAAME,GAAA;AAAA;AAAA,CAAAT,aAAA,GAAAE,CAAA,OAAME,OAAA,CAAQC,GAAG,CAACC,WAAW;AACnC,MAAMI,OAAA;AAAA;AAAA,CAAAV,aAAA,GAAAE,CAAA,OAAU;EACdS,SAAA,EAAW;IACTC,OAAA,EAASC,QAAA,CAAAC,gBAAgB,CAACC,EAAE;IAC5BC,MAAA,EAAQ;IACRC,iBAAA,EAAmB;EACrB;AACF;AAEA,IAAIC,MAAA;AAAA;AAAAlB,aAAA,GAAAE,CAAA;AAEJ,IAAIE,OAAA,CAAQC,GAAG,CAACc,QAAQ,KAAK,eAAe;EAAA;EAAAnB,aAAA,GAAAO,CAAA;EAC1C;EACA;EACA,MAAMa,eAAA;EAAA;EAAA,CAAApB,aAAA,GAAAE,CAAA,OAAkBmB,MAAA;EAAA;EAAArB,aAAA,GAAAE,CAAA;EAIxB,IAAI,CAACkB,eAAA,CAAgBE,YAAY,EAAE;IAAA;IAAAtB,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACjCkB,eAAA,CAAgBE,YAAY,GAAG,IAAIT,QAAA,CAAAU,WAAW,CAACd,GAAA,EAAKC,OAAA;EACtD;EAAA;EAAA;IAAAV,aAAA,GAAAO,CAAA;EAAA;EAAAP,aAAA,GAAAE,CAAA;EACAgB,MAAA,GAASE,eAAA,CAAgBE,YAAY;AACvC,OAAO;EAAA;EAAAtB,aAAA,GAAAO,CAAA;EAAAP,aAAA,GAAAE,CAAA;EACL;EACAgB,MAAA,GAAS,IAAIL,QAAA,CAAAU,WAAW,CAACd,GAAA,EAAKC,OAAA;AAChC;MAIAP,QAAA;AAAA;AAAA,CAAAH,aAAA,GAAAE,CAAA,QAAegB,MAAA","ignoreList":[]}