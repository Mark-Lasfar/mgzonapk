{"version":3,"names":["cov_1dxpv2rxdp","actualCoverage","s","default","f","ProductPage","metadata","title","params","product","_productactions","getProductBySlug","slug","b","_navigation","notFound","seller","_selleractions","getSellerById","sellerId","session","_auth","auth","isSubscribed","subscription","status","includes","plan","_jsxruntime","jsx","className","jsxs","_card","Card","CardHeader","logo","_image","src","alt","businessName","width","height","CardTitle","name","CardContent","images","fill","description","_rating","rating","avgRating","_utils","formatNumber","numReviews","_productprice","price","listPrice","isDeal","tags","countInStock","category","_link","href","_id","_addtocart","item","clientId","quantity","image"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/app/[locale]/(root)/seller/product/[slug]/page.tsx"],"sourcesContent":["// app/[locale]/(root)/seller/product/[slug]/page.tsx\nimport { notFound } from 'next/navigation';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { getProductBySlug } from '@/lib/actions/product.actions';\nimport { getSellerById } from '@/lib/actions/seller.actions';\nimport { auth } from '@/auth';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport AddToCart from '@/components/shared/product/add-to-cart';\nimport ProductPrice from '@/components/shared/product/product-price';\nimport Rating from '@/components/shared/product/rating';\nimport { formatNumber } from '@/lib/utils';\n\nexport const metadata = {\n  title: 'Product Details',\n};\n\nexport default async function ProductPage({\n  params,\n}: {\n  params: { slug: string };\n}) {\n  const product = await getProductBySlug(params.slug);\n  if (!product) notFound();\n\n  const seller = await getSellerById(product.sellerId);\n  if (!seller) notFound();\n\n  const session = await auth();\n  const isSubscribed = seller.subscription.status === 'active' && ['Pro', 'VIP'].includes(seller.subscription.plan);\n\n  return (\n    <main className=\"max-w-6xl mx-auto py-8\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-4\">\n            {isSubscribed && seller.logo && (\n              <Image\n                src={seller.logo}\n                alt={`${seller.businessName} logo`}\n                width={80}\n                height={80}\n                className=\"object-contain\"\n              />\n            )}\n            <CardTitle>{product.name}</CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"grid md:grid-cols-2 gap-6\">\n          <div className=\"relative h-96\">\n            <Image\n              src={product.images[0] || '/images/fallback.jpg'}\n              alt={product.name}\n              fill\n              className=\"object-contain\"\n            />\n          </div>\n          <div className=\"space-y-4\">\n            <p className=\"text-lg\">{product.description}</p>\n            <div className=\"flex items-center gap-2\">\n              <Rating rating={product.avgRating} />\n              <span>({formatNumber(product.numReviews)} reviews)</span>\n            </div>\n            <ProductPrice\n              price={product.price}\n              listPrice={product.listPrice}\n              isDeal={product.tags?.includes('todays-deal')}\n            />\n            <p>Stock: {product.countInStock > 0 ? `${product.countInStock} available` : 'Out of stock'}</p>\n            <p>Category: {product.category}</p>\n            <p>Seller: <Link href={`/seller/${seller._id}`}>{seller.businessName}</Link></p>\n            {product.countInStock > 0 && (\n              <AddToCart\n                item={{\n                  clientId: product._id,\n                  product: product._id,\n                  name: product.name,\n                  slug: product.slug,\n                  category: product.category,\n                  price: product.price,\n                  quantity: 1,\n                  image: product.images[0] || '/images/fallback.jpg',\n                  countInStock: product.countInStock,\n                }}\n              />\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </main>\n  );\n}"],"mappings":"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","ignoreList":[]}