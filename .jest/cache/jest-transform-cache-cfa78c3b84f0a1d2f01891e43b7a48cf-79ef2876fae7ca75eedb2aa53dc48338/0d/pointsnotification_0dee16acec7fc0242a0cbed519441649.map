{"version":3,"names":["cov_11gbxepw7d","actualCoverage","s","sendPointsNotification","resend","_resend","Resend","process","env","RESEND_API_KEY","userId","email","points","type","description","f","subject","b","html","NEXT_PUBLIC_BASE_URL","_email","EMAIL_CONFIG","FROM","NAME","error","emails","send","from","EMAIL","to","Error","message","success","console"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/lib/emails/points-notification.ts"],"sourcesContent":["import { EMAIL_CONFIG } from '@/lib/config/email'\nimport { Resend } from 'resend'\n\nconst resend = new Resend(process.env.RESEND_API_KEY)\n\nexport async function sendPointsNotification({\n  userId,\n  email,\n  points,\n  type,\n  description,\n}: {\n  userId: string\n  email: string\n  points: number\n  type: 'points_earned' | 'points_redeemed'\n  description: string\n}) {\n  try {\n    const subject = type === 'points_earned' \n      ? `You Earned ${points} Points!` \n      : `You Redeemed ${points} Points`\n    \n    const html = `\n      <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <h2>${subject}</h2>\n        <p>Hello,</p>\n        <p>${\n          type === 'points_earned'\n            ? `You have earned ${points} points for: ${description}`\n            : `You have redeemed ${points} points for: ${description}`\n        }</p>\n        <p>Check your points balance in your account dashboard.</p>\n        <a href=\"${process.env.NEXT_PUBLIC_BASE_URL}/account\" style=\"display: inline-block; padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;\">View Dashboard</a>\n        <p>Best regards,<br/>${EMAIL_CONFIG.FROM.NAME}</p>\n      </div>\n    `\n\n    const { error } = await resend.emails.send({\n      from: `${EMAIL_CONFIG.FROM.NAME} <${EMAIL_CONFIG.FROM.EMAIL}>`,\n      to: email,\n      subject,\n      html,\n    })\n\n    if (error) {\n      throw new Error(`Failed to send email: ${error.message}`)\n    }\n\n    return { success: true }\n  } catch (error) {\n    console.error('Send points notification error:', error)\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to send points notification'\n    }\n  }\n}"],"mappings":"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","ignoreList":[]}