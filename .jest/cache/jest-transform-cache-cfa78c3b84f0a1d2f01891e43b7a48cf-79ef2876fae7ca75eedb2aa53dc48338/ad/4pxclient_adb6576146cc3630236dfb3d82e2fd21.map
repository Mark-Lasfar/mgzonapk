{"version":3,"names":["FourPXClient","constructor","config","cov_1hogvi3pdn","f","s","apiKey","apiSecret","defaultWarehouse","warehouseId","baseUrl","generateSignature","content","timestamp","raw","_crypto","default","createHash","update","digest","toUpperCase","request","serviceCode","params","Date","now","toString","JSON","stringify","signature","body","requestBody","sign","accessToken","appKey","version","format","response","_axios","post","headers","data","code","b","Error","msg","parse","createOrder","order","getOrder","orderId","ref_no"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/lib/api/integrations/4px/4px-client.ts"],"sourcesContent":["import crypto from 'crypto';\nimport axios from 'axios';\n\ninterface FourPXClientConfig {\n  apiKey: string;\n  apiSecret: string;\n  warehouseId?: string;\n}\n\nexport class FourPXClient {\n  private apiKey: string;\n  private apiSecret: string;\n  public defaultWarehouse?: string;\n  private baseUrl: string;\n\n  constructor(config: FourPXClientConfig) {\n    this.apiKey = config.apiKey;\n    this.apiSecret = config.apiSecret;\n    this.defaultWarehouse = config.warehouseId;\n    this.baseUrl = 'https://openapi.4px.com/api/service'; \n  }\n\n  private generateSignature(content: string, timestamp: string): string {\n    const raw = this.apiKey + content + timestamp + this.apiSecret;\n    return crypto.createHash('md5').update(raw, 'utf8').digest('hex').toUpperCase();\n  }\n\n  private async request<T = any>(serviceCode: string, params: any): Promise<T> {\n    const timestamp = Date.now().toString();\n    const content = JSON.stringify(params);\n    const signature = this.generateSignature(content, timestamp);\n\n    const body = {\n      serviceCode,\n      requestBody: content,\n      sign: signature,\n      accessToken: '',\n      appKey: this.apiKey,\n      timestamp,\n      version: '1.0',\n      format: 'json',\n    };\n\n    const response = await axios.post(this.baseUrl, body, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (response.data.code !== '0') {\n      throw new Error(response.data.msg || '4PX API Error');\n    }\n\n    return JSON.parse(response.data.data);\n  }\n\n  async createOrder(order: any) {\n    return this.request('ORDER_CREATE', order);\n  }\n\n  async getOrder(orderId: string) {\n    return this.request('ORDER_TRACK', { ref_no: orderId });\n  }\n}\n"],"mappings":"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","ignoreList":[]}