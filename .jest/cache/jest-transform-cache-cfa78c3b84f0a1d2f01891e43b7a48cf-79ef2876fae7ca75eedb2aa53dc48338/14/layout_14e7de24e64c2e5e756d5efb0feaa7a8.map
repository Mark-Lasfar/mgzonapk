{"version":3,"names":["cov_2csdie687l","actualCoverage","s","default","f","SellerRegistrationLayout","metadata","title","description","children","params","locale","session","settings","Promise","all","_server","getLocale","_auth","auth","_settingactions","getSetting","user","b","_navigation","redirect","sellerResponse","_selleractions","getSellerByUserId","id","success","data","_jsxruntime","jsx","className","error","console","Error","message","includes"],"sources":["/home/hager/new/my-nextjs-project-master (3)/my-nextjs-project-master/app/[locale]/(root)/seller/registration/layout.tsx"],"sourcesContent":["// app/[locale]/seller/registration/layout.tsx\nimport { Metadata } from 'next'\nimport { redirect } from 'next/navigation'\nimport { auth } from '@/auth'\nimport { getSellerByUserId } from '@/lib/actions/seller.actions'\nimport { getSetting } from '@/lib/actions/setting.actions'\nimport { getLocale } from 'next-intl/server'\nimport type { ReactNode } from 'react'\n\nexport const metadata: Metadata = {\n  title: 'Seller Registration',\n  description: 'Register as a seller on our platform',\n}\n\nexport default async function SellerRegistrationLayout({\n  children,\n  params,\n}: {\n  children: ReactNode\n  params: { locale: string }\n}) {\n  try {\n    // تنفيذ كل العمليات غير المتزامنة في وقت واحد\n    const [locale, session, settings] = await Promise.all([\n      getLocale(),\n      auth(),\n      getSetting(),\n    ])\n\n    // التحقق من المصادقة\n    if (!session?.user) {\n      return redirect(`/${locale}/sign-in?callbackUrl=/${locale}/seller/registration`)\n    }\n\n    // التحقق من حالة البائع\n    const sellerResponse = await getSellerByUserId(session.user.id!)\n\n    // إذا كان المستخدم بائعاً بالفعل، قم بتوجيهه إلى لوحة التحكم\n    if (sellerResponse.success && sellerResponse.data) {\n      return redirect(`/${locale}/seller/dashboard`)\n    }\n\n    // عرض صفحة التسجيل\n    return (\n      <div className=\"min-h-screen bg-background\">\n        {children}\n      </div>\n    )\n\n  } catch (error) {\n    console.error('Error in SellerRegistrationLayout:', error)\n    \n    // تجاهل أخطاء إعادة التوجيه\n    if (error instanceof Error && !error.message.includes('NEXT_REDIRECT')) {\n      const locale = await getLocale()\n      return redirect(`/${locale}/error`)\n    }\n    \n    throw error\n  }\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IASqB;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;;;;;;;;;;;;;;;EAKrBC,OA8CC,WAAAA,CAAA;IAAA;IAAAH,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;WA9C6BG,wBAAA;;EALjBC,QAAQ,WAAAA,CAAA;IAAA;IAAAN,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;WAARI,QAAA;;;;;;;;kCAPY;;;kCACJ;;;kCACa;;;mCACP;;;mCACD;AAGnB,MAAMA,QAAA;AAAA;AAAA,CAAAN,cAAA,GAAAE,CAAA,QAAqB;EAChCK,KAAA,EAAO;EACPC,WAAA,EAAa;AACf;AAEe,eAAeH,yBAAyB;EACrDI,QAAQ;EACRC;AAAM,CAIP;EAAA;EAAAV,cAAA,GAAAI,CAAA;EAAAJ,cAAA,GAAAE,CAAA;EACC,IAAI;IACF;IACA,MAAM,CAACS,MAAA,EAAQC,OAAA,EAASC,QAAA,CAAS;IAAA;IAAA,CAAAb,cAAA,GAAAE,CAAA,QAAG,MAAMY,OAAA,CAAQC,GAAG,CAAC,CACpD,IAAAC,OAAA,CAAAC,SAAS,KACT,IAAAC,KAAA,CAAAC,IAAI,KACJ,IAAAC,eAAA,CAAAC,UAAU,IACX;IAED;IAAA;IAAArB,cAAA,GAAAE,CAAA;IACA,IAAI,CAACU,OAAA,EAASU,IAAA,EAAM;MAAA;MAAAtB,cAAA,GAAAuB,CAAA;MAAAvB,cAAA,GAAAE,CAAA;MAClB,OAAO,IAAAsB,WAAA,CAAAC,QAAQ,EAAC,IAAId,MAAA,yBAA+BA,MAAA,sBAA4B;IACjF;IAAA;IAAA;MAAAX,cAAA,GAAAuB,CAAA;IAAA;IAEA;IACA,MAAMG,cAAA;IAAA;IAAA,CAAA1B,cAAA,GAAAE,CAAA,QAAiB,MAAM,IAAAyB,cAAA,CAAAC,iBAAiB,EAAChB,OAAA,CAAQU,IAAI,CAACO,EAAE;IAE9D;IAAA;IAAA7B,cAAA,GAAAE,CAAA;IACA;IAAI;IAAA,CAAAF,cAAA,GAAAuB,CAAA,UAAAG,cAAA,CAAeI,OAAO;IAAA;IAAA,CAAA9B,cAAA,GAAAuB,CAAA,UAAIG,cAAA,CAAeK,IAAI,GAAE;MAAA;MAAA/B,cAAA,GAAAuB,CAAA;MAAAvB,cAAA,GAAAE,CAAA;MACjD,OAAO,IAAAsB,WAAA,CAAAC,QAAQ,EAAC,IAAId,MAAA,mBAAyB;IAC/C;IAAA;IAAA;MAAAX,cAAA,GAAAuB,CAAA;IAAA;IAEA;IAAAvB,cAAA,GAAAE,CAAA;IACA,oBACE,IAAA8B,WAAA,CAAAC,GAAA,EAAC;MAAIC,SAAA,EAAU;gBACZzB;;EAIP,EAAE,OAAO0B,KAAA,EAAO;IAAA;IAAAnC,cAAA,GAAAE,CAAA;IACdkC,OAAA,CAAQD,KAAK,CAAC,sCAAsCA,KAAA;IAEpD;IAAA;IAAAnC,cAAA,GAAAE,CAAA;IACA;IAAI;IAAA,CAAAF,cAAA,GAAAuB,CAAA,UAAAY,KAAA,YAAiBE,KAAA;IAAA;IAAA,CAAArC,cAAA,GAAAuB,CAAA,UAAS,CAACY,KAAA,CAAMG,OAAO,CAACC,QAAQ,CAAC,mBAAkB;MAAA;MAAAvC,cAAA,GAAAuB,CAAA;MACtE,MAAMZ,MAAA;MAAA;MAAA,CAAAX,cAAA,GAAAE,CAAA,QAAS,MAAM,IAAAc,OAAA,CAAAC,SAAS;MAAA;MAAAjB,cAAA,GAAAE,CAAA;MAC9B,OAAO,IAAAsB,WAAA,CAAAC,QAAQ,EAAC,IAAId,MAAA,QAAc;IACpC;IAAA;IAAA;MAAAX,cAAA,GAAAuB,CAAA;IAAA;IAAAvB,cAAA,GAAAE,CAAA;IAEA,MAAMiC,KAAA;EACR;AACF","ignoreList":[]}